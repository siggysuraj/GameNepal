@model GameNepal.Models.TransactionModel
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<body>
    <div class="parallax-window" data-parallax="scroll" data-image-src="../../Content/images/bg-01.jpg">
        <div class="container-fluid">

            <section class="row" id="tmHome">
                <div class="col-12 tm-home-container">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                            <li data-target="#myCarousel" data-slide-to="3"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="item active">
                                <img src="../../Content/images/pubg.jpg" class="d-block w-100" alt="PUBG">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5>PUBG</h5>
                                    <p>PlayerUnknown's Battlegrounds is an online multiplayer battle royale game developed and published by PUBG Corporation, a subsidiary of South Korean video game company Bluehole.</p>
                                </div>
                            </div>
                            <div class="item">
                                <img src="../../Content/images/fortnite.jpg" class="d-block w-100" alt="FORTNITE">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5>FORTNITE</h5>
                                    <p>Fortnite is an online video game developed by Epic Games and released in 2017. It is available in three distinct game mode versions: Fortnite: Save the World, Fortnite Battle Royale and Fortnite Creative</p>
                                </div>
                            </div>
                            <div class="item">
                                <img src="../../Content/images/nfs.jpg" class="d-block w-100" alt="NEED FOR SPEED">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5>NEED FOR SPEED</h5>
                                    <p>Need for Speed is a racing video game franchise published by Electronic Arts and currently developed by Ghost Games. </p>
                                </div>
                            </div>
                            <div class="item">
                                <img src="../../Content/images/freefire.jpg" class="d-block w-100" alt="GARENA FREE FIRE">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5>GARENA FREE FIRE</h5>
                                    <p>Garena Free Fire is a mobile battle royale game, developed and published by Garena. </p>
                                </div>
                            </div>
                        </div>
                        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </section>

            <!-- Game Rates -->
            <!-- Services header -->
            <section class="row" id="tmHomeRates">
                <div class="col-12 tm-tabs-container">
                    <div class="tm-tab-links">
                        <ul class="tabs clearfix" data-tabgroup="first-tab-group">
                            <li>
                                <a href="#tab1" class="active">
                                    <div class="icon-wrap"><i class="fas fa-2x fa-dollar-sign"></i></div>
                                    Payment Info
                                </a>
                            </li>
                            <li>
                                <a href="#tab2" class="">
                                    <div class="icon-wrap"><i class="fas fa-2x fa-bomb"></i></div>
                                    Pubg Buy rate
                                </a>
                            </li>
                            <li>
                                <a href="#tab3" class="">
                                    <div class="icon-wrap"><i class="fas fa-2x fa-fighter-jet"></i></div>
                                    Garena Free fire
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="tm-tab-contents">
                        <div id="first-tab-group" class="tabgroup">
                            <div id="tab1">
                                <div class="text-content">
                                    @Html.Partial("_PaymentAccount")
                                </div>
                            </div>
                            <div id="tab2">
                                <div class="text-content">
                                    @Html.Partial("_ExchangeRates", Model.GameExchangeRateList.ToList()
                                                   .Where(x=>x.GameId== (int)GameNepal.Models.Games.PUBG)
                                                   .FirstOrDefault())
                                </div>
                            </div>
                            <div id="tab3">
                                <div class="text-content">
                                    @Html.Partial("_ExchangeRates", Model.GameExchangeRateList.ToList()
                                                   .Where(x=>x.GameId== (int)GameNepal.Models.Games.GarenaFreeFire)
                                                   .FirstOrDefault())
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </section>

            <!-- Purchase Steps -->
            <section class="row" id="tmHomeSteps">
                <div class="tm-home-parallax-header">
                    <div class="tm-bg-black-transparent text-center tm-services-header tm-testimonials-header">
                        <h2 class="text-uppercase tm-services-page-title tm-testimonials-page-title">How to Buy your gaming currency</h2>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="tm-bg-black-transparent tm-about-box">
                        <div class="tm-about-number-container">1.0</div>
                        <h3 class="tm-about-name">Decide and Pay</h3>
                        <p class="tm-about-description">
                            Choose your gaming currency based on the rates above. Transfer the amount to one of our payment account.
                        </p>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="tm-bg-black-transparent tm-about-box">
                        <div class="tm-about-number-container">2.0</div>
                        <h3 class="tm-about-name">Record</h3>
                        <p class="tm-about-description">
                            Please note the transaction id or payment confirmation numer from reciept.
                        </p>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="tm-bg-black-transparent tm-about-box">
                        <div class="tm-about-number-container">3.0</div>
                        <h3 class="tm-about-name">Order</h3>
                        <p class="tm-about-description">
                            Fill out the purchase request order below and enter the amount you transferred along with payment receipt number.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Purchase form -->
            <section class="row" id="tmHomeForm">
                <div class="col-12 tm-call-to-action-col">
                    <div class="advertisement tm-bg-transparent">
                        <div id="myCarousel1" class="carousel slide" data-ride="carousel">

                            @if (Model.Advertisements.Keys.Count > 0)
                            {
                                <div class="carousel-inner">
                                    @for (var index = 0; index < Model.Advertisements.Keys.Count; index++)
                                    {
                                        var classAttr = index == 0 ? "item active" : "item";
                                        var name = Model.Advertisements.ElementAt(index).Key;
                                        dynamic fileDetails = Model.Advertisements.ElementAt(index).Value;

                                        var filePath = fileDetails.filePath;
                                        var desc = fileDetails.description;

                                        <div class="@classAttr">
                                            <img src="../../@filePath" class="d-block w-100" alt=@name>
                                            <div class="carousel-caption d-none d-md-block">
                                                <h5>@name</h5>
                                                <p>@desc</p>
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                    <!-- Right Form-->
                    <div class="tm-bg-transparent tm-call-to-action-text">
                        <h2 class="tm-call-to-action-title">Purchase Order Form</h2>
                        <p class="tm-call-to-action-description" style="color: red">
                            *It might take more processing time than usual if payment amount does not match or if you enter wrong receipt number
                        </p>
                        <div class="errorMessage">
                            @if (TempData["SuccessMsg"] != null)
                            {
                                <div class="alert alert-success fade in" id="divResult">
                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                    @Html.Raw(TempData["SuccessMsg"])
                                </div>
                            }

                            @if (TempData["ErrorMsg"] != null)
                            {
                                <div class="alert alert-danger fade in" id="divResult">
                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                    @Html.Raw(TempData["ErrorMsg"])
                                    @Html.ValidationSummary(false, "", new {@class = "text-danger"})
                                </div>
                            }
                        </div>

                        @using (Html.BeginForm("CreateTransaction", "User"))
                        {
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    @Html.Label("Game")
                                    @Html.DropDownListFor(x => x.GameId, Model.GamesList, new {@id = "inputGame", @class = "form-control dropDown"})
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.Label("User name")
                                    @Html.TextBoxFor(x => x.Username, new {@class = "form-control", @id = "inputUsername", required = "required", placeholder = "Enter your username for the game"})
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    @Html.Label("Payment confirmation number")
                                    @Html.TextBoxFor(x => x.PaymentId, new {@class = "form-control", @id = "inputConfirm", required = "required", placeholder = "Enter your receipt id"})
                                </div>
                                <div class="form-group col-md-4">
                                    @Html.Label("Payment Method")
                                    @Html.DropDownListFor(x => x.PaymentPartnerId, Model.PaymentPartners, new {@class = "form-control dropDown", @id = "inputPayment"})
                                </div>
                                <div class="form-group col-md-2">
                                    @Html.Label("Amount")
                                    @Html.TextBoxFor(x => x.Amount, new {@class = "form-control", required = "required", placeholder = "Enter amount", @id = "inputAmount"})
                                </div>
                            </div>
                            <div class="form-group col-md-12">
                                @Html.Label("Remarks")
                                @Html.TextAreaFor(x => x.Remarks, new {@class = "form-control", required = "required", placeholder = "Describe what would you like to buy here..", @id = "inputRemark"})
                            </div>
                            <div class="form-group col-md-6">
                                <button type="reset" class="btn btn-danger">Reset</button>
                                <button type="submit" class="btn btn-success">Submit</button>
                            </div>
                        }
                    </div>
                </div>
            </section>
        </div>
        <!-- .container-fluid -->
    </div>
</body>
